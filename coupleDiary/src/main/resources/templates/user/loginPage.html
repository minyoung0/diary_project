<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>로그인</title>
    <style>
        :root { --card-w: 360px; }
        * { box-sizing: border-box; }
        body {
            margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
            background: #f6f7fb; color: #1f2937; display: grid; place-items: center; min-height: 100vh;
        }
        .card {
            width: min(92vw, var(--card-w)); padding: 28px 24px; background: #fff;
            border-radius: 12px; box-shadow: 0 10px 24px rgba(0,0,0,.06);
        }
        h1 { font-size: 20px; margin: 0 0 16px; }
        form { display: grid; gap: 14px; }
        label { font-size: 13px; color: #374151; }
        input[type="text"],
        input[type="password"] {
            width: 100%; padding: 12px 12px; border: 1px solid #e5e7eb; border-radius: 8px;
            font-size: 14px; outline: none;
        }
        input:focus { border-color: #6366f1; box-shadow: 0 0 0 3px rgba(99,102,241,.15); }
        .row { display: flex; align-items: center; justify-content: space-between; }
        .row label { display: inline-flex; gap: 8px; align-items: center; }
        button {
            width: 100%; padding: 12px; border: 0; border-radius: 8px; cursor: pointer;
            background: #111827; color: #fff; font-weight: 600; font-size: 14px;
        }
        .muted { font-size: 13px; color: #6b7280; text-align: center; margin-top: 6px; }
        a { color: #4f46e5; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
<main class="card" role="main" aria-labelledby="title">
    <h1 id="title">로그인</h1>

    <form id="loginForm">
        <!-- (Spring Security) CSRF 필요 시 사용
        <input type="hidden" name="_csrf" value="${_csrf.token}">
        -->
        <div>
            <label for="id">아이디</label>
            <input id="id" name="id" type="text" inputmode="email" required />
        </div>

        <div>
            <label for="password">비밀번호</label>
            <input id="password" name="password" type="password"
                   placeholder="********" autocomplete="current-password" required />
        </div>

        <button type="submit">로그인</button>
        <p class="muted">아직 계정이 없나요? <a href="/joinPage">회원가입</a></p>
    </form>
</main>
<script>
    document.getElementById('loginForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const body = JSON.stringify({
            userId: document.getElementById('id').value,
            password: document.getElementById('password').value
        });
        // const res = await fetch('/signin', {
        //     method: 'POST',
        //     headers: {'Content-Type': 'application/json'},
        //     body
        // });
        // 서버가 302 + Set-Cookie로 응답하면 location으로 이동
        //if (res.status === 303 ||res.status === 302 ) location.href = '/index';
        const res = await fetch('/signin', { method:'POST', headers:{'Content-Type':'application/json'}, body });
        if (res.ok) window.location.href = '/';
    });
</script>
</body>
</html>
